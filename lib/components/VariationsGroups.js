import * as React from 'react';
import { isProductSupplierMOD } from './utils';
import { ButtonAddGroup, ButtonRemoveGroup } from './buttons';
import { LabelGroupCost } from './cost';
import GroupInventory from './GroupInventory';
import InputGroupQuantity from './InputGroupQuantity';
import InputHiddenStatic from './InputHiddenStatic';
import Variations from './Variations';
import { useFieldArray } from 'react-hook-form';
import { useMerchiFormContext } from './MerchiProductFormProvider';
import { jsx as _jsx } from "react/jsx-runtime";
import { jsxs as _jsxs } from "react/jsx-runtime";
import { Fragment as _Fragment } from "react/jsx-runtime";
function VariationsGroups(_ref) {
  var disabled = _ref.disabled,
    _ref$name = _ref.name,
    name = _ref$name === void 0 ? 'variationsGroups' : _ref$name;
  var _useMerchiFormContext = useMerchiFormContext(),
    classNameGroupsContainer = _useMerchiFormContext.classNameGroupsContainer,
    control = _useMerchiFormContext.control,
    hideQuantityField = _useMerchiFormContext.hideQuantityField,
    hideCalculatedPrice = _useMerchiFormContext.hideCalculatedPrice,
    job = _useMerchiFormContext.job,
    product = _useMerchiFormContext.product;
  var _useFieldArray = useFieldArray({
      control: control,
      keyName: 'groupId',
      name: name
    }),
    append = _useFieldArray.append,
    fields = _useFieldArray.fields,
    _remove = _useFieldArray.remove;
  var isResellMOD = isProductSupplierMOD(product);
  var groupCount = fields.length;
  return /*#__PURE__*/_jsx(_Fragment, {
    children: fields.map(function (group, index) {
      var count = index + 1;
      var variationGroup = job.variationsGroups[index];
      return /*#__PURE__*/_jsxs("fieldset", {
        className: classNameGroupsContainer,
        name: "".concat(name, "[").concat(index, "]"),
        children: [isResellMOD || hideQuantityField ? /*#__PURE__*/_jsx(InputHiddenStatic, {
          name: "".concat(name, "[").concat(index, "].quantity"),
          value: 1
        }) : /*#__PURE__*/_jsx(InputGroupQuantity, {
          count: count,
          disabled: disabled,
          name: "".concat(name, "[").concat(index, "].quantity")
        }), /*#__PURE__*/_jsx(Variations, {
          containerClass: "merchi-embed-form_product-group-variation-container",
          disabled: disabled,
          name: "".concat(name, "[").concat(index, "].variations"),
          keyName: "variationGroupsArrayFieldId"
        }), product.needsInventory && variationGroup && /*#__PURE__*/_jsx(GroupInventory, {
          group: job.variationsGroups[index]
        }), /*#__PURE__*/_jsxs("div", {
          className: "merchi-embed-form_product-group-actions-cost-container",
          children: [!hideCalculatedPrice && variationGroup && /*#__PURE__*/_jsx(LabelGroupCost, {
            group: variationGroup
          }), /*#__PURE__*/_jsx("div", {
            className: "merchi-embed-form_product-group-actions-container",
            children: groupCount > 1 && /*#__PURE__*/_jsx(ButtonRemoveGroup, {
              count: count,
              disabled: disabled,
              remove: function remove() {
                return _remove(index);
              }
            })
          })]
        }), groupCount === count && /*#__PURE__*/_jsx(ButtonAddGroup, {
          addGroup: append,
          disabled: disabled
        })]
      }, group.groupId);
    })
  });
}
export default VariationsGroups;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsImlzUHJvZHVjdFN1cHBsaWVyTU9EIiwiQnV0dG9uQWRkR3JvdXAiLCJCdXR0b25SZW1vdmVHcm91cCIsIkxhYmVsR3JvdXBDb3N0IiwiR3JvdXBJbnZlbnRvcnkiLCJJbnB1dEdyb3VwUXVhbnRpdHkiLCJJbnB1dEhpZGRlblN0YXRpYyIsIlZhcmlhdGlvbnMiLCJ1c2VGaWVsZEFycmF5IiwidXNlTWVyY2hpRm9ybUNvbnRleHQiLCJqc3giLCJfanN4IiwianN4cyIsIl9qc3hzIiwiRnJhZ21lbnQiLCJfRnJhZ21lbnQiLCJWYXJpYXRpb25zR3JvdXBzIiwiX3JlZiIsImRpc2FibGVkIiwiX3JlZiRuYW1lIiwibmFtZSIsIl91c2VNZXJjaGlGb3JtQ29udGV4dCIsImNsYXNzTmFtZUdyb3Vwc0NvbnRhaW5lciIsImNvbnRyb2wiLCJoaWRlUXVhbnRpdHlGaWVsZCIsImhpZGVDYWxjdWxhdGVkUHJpY2UiLCJqb2IiLCJwcm9kdWN0IiwiX3VzZUZpZWxkQXJyYXkiLCJrZXlOYW1lIiwiYXBwZW5kIiwiZmllbGRzIiwicmVtb3ZlIiwiaXNSZXNlbGxNT0QiLCJncm91cENvdW50IiwibGVuZ3RoIiwiY2hpbGRyZW4iLCJtYXAiLCJncm91cCIsImluZGV4IiwiY291bnQiLCJ2YXJpYXRpb25Hcm91cCIsInZhcmlhdGlvbnNHcm91cHMiLCJjbGFzc05hbWUiLCJjb25jYXQiLCJ2YWx1ZSIsImNvbnRhaW5lckNsYXNzIiwibmVlZHNJbnZlbnRvcnkiLCJhZGRHcm91cCIsImdyb3VwSWQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvY29tcG9uZW50cy9WYXJpYXRpb25zR3JvdXBzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc1Byb2R1Y3RTdXBwbGllck1PRCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgQnV0dG9uQWRkR3JvdXAsIEJ1dHRvblJlbW92ZUdyb3VwIH0gZnJvbSAnLi9idXR0b25zJztcbmltcG9ydCB7IExhYmVsR3JvdXBDb3N0IH0gZnJvbSAnLi9jb3N0JztcbmltcG9ydCBHcm91cEludmVudG9yeSBmcm9tICcuL0dyb3VwSW52ZW50b3J5JztcbmltcG9ydCBJbnB1dEdyb3VwUXVhbnRpdHkgZnJvbSAnLi9JbnB1dEdyb3VwUXVhbnRpdHknO1xuaW1wb3J0IElucHV0SGlkZGVuU3RhdGljIGZyb20gJy4vSW5wdXRIaWRkZW5TdGF0aWMnO1xuaW1wb3J0IFZhcmlhdGlvbnMgZnJvbSAnLi9WYXJpYXRpb25zJztcbmltcG9ydCB7IHVzZUZpZWxkQXJyYXkgfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgdXNlTWVyY2hpRm9ybUNvbnRleHQgfSBmcm9tICcuL01lcmNoaVByb2R1Y3RGb3JtUHJvdmlkZXInO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIG5hbWU/OiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIFZhcmlhdGlvbnNHcm91cHMoeyBkaXNhYmxlZCwgbmFtZSA9ICd2YXJpYXRpb25zR3JvdXBzJyB9OiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgY2xhc3NOYW1lR3JvdXBzQ29udGFpbmVyLFxuICAgIGNvbnRyb2wsXG4gICAgaGlkZVF1YW50aXR5RmllbGQsXG4gICAgaGlkZUNhbGN1bGF0ZWRQcmljZSxcbiAgICBqb2IsXG4gICAgcHJvZHVjdCxcbiAgfSA9IHVzZU1lcmNoaUZvcm1Db250ZXh0KCk7XG4gIGNvbnN0IHsgYXBwZW5kLCBmaWVsZHMsIHJlbW92ZSB9ID0gdXNlRmllbGRBcnJheSh7XG4gICAgY29udHJvbCxcbiAgICBrZXlOYW1lOiAnZ3JvdXBJZCcsXG4gICAgbmFtZSxcbiAgfSk7XG4gIGNvbnN0IGlzUmVzZWxsTU9EID0gaXNQcm9kdWN0U3VwcGxpZXJNT0QocHJvZHVjdCk7XG4gIGNvbnN0IGdyb3VwQ291bnQgPSBmaWVsZHMubGVuZ3RoO1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7ZmllbGRzLm1hcCgoZ3JvdXA6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBjb3VudCA9IGluZGV4ICsgMTtcbiAgICAgICAgY29uc3QgdmFyaWF0aW9uR3JvdXAgPSBqb2IudmFyaWF0aW9uc0dyb3Vwc1tpbmRleF07XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGZpZWxkc2V0XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZUdyb3Vwc0NvbnRhaW5lcn1cbiAgICAgICAgICAgIGtleT17Z3JvdXAuZ3JvdXBJZH1cbiAgICAgICAgICAgIG5hbWU9e2Ake25hbWV9WyR7aW5kZXh9XWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzUmVzZWxsTU9EIHx8IGhpZGVRdWFudGl0eUZpZWxkID8gKFxuICAgICAgICAgICAgICA8SW5wdXRIaWRkZW5TdGF0aWNcbiAgICAgICAgICAgICAgICBuYW1lPXtgJHtuYW1lfVske2luZGV4fV0ucXVhbnRpdHlgfVxuICAgICAgICAgICAgICAgIHZhbHVlPXsxfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPElucHV0R3JvdXBRdWFudGl0eVxuICAgICAgICAgICAgICAgIGNvdW50PXtjb3VudH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgbmFtZT17YCR7bmFtZX1bJHtpbmRleH1dLnF1YW50aXR5YH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8VmFyaWF0aW9uc1xuICAgICAgICAgICAgICBjb250YWluZXJDbGFzcz0nbWVyY2hpLWVtYmVkLWZvcm1fcHJvZHVjdC1ncm91cC12YXJpYXRpb24tY29udGFpbmVyJ1xuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgIG5hbWU9e2Ake25hbWV9WyR7aW5kZXh9XS52YXJpYXRpb25zYH1cbiAgICAgICAgICAgICAga2V5TmFtZT0ndmFyaWF0aW9uR3JvdXBzQXJyYXlGaWVsZElkJ1xuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHtwcm9kdWN0Lm5lZWRzSW52ZW50b3J5ICYmIHZhcmlhdGlvbkdyb3VwICYmIChcbiAgICAgICAgICAgICAgPEdyb3VwSW52ZW50b3J5IGdyb3VwPXtqb2IudmFyaWF0aW9uc0dyb3Vwc1tpbmRleF19IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lcmNoaS1lbWJlZC1mb3JtX3Byb2R1Y3QtZ3JvdXAtYWN0aW9ucy1jb3N0LWNvbnRhaW5lcic+XG4gICAgICAgICAgICAgIHshaGlkZUNhbGN1bGF0ZWRQcmljZSAmJiB2YXJpYXRpb25Hcm91cCAmJiAoXG4gICAgICAgICAgICAgICAgPExhYmVsR3JvdXBDb3N0IGdyb3VwPXt2YXJpYXRpb25Hcm91cH0gLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lcmNoaS1lbWJlZC1mb3JtX3Byb2R1Y3QtZ3JvdXAtYWN0aW9ucy1jb250YWluZXInPlxuICAgICAgICAgICAgICAgIHtncm91cENvdW50ID4gMSAmJiAoXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uUmVtb3ZlR3JvdXBcbiAgICAgICAgICAgICAgICAgICAgY291bnQ9e2NvdW50fVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZT17KCkgPT4gcmVtb3ZlKGluZGV4KX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtncm91cENvdW50ID09PSBjb3VudCAmJiAoXG4gICAgICAgICAgICAgIDxCdXR0b25BZGRHcm91cCBhZGRHcm91cD17YXBwZW5kfSBkaXNhYmxlZD17ZGlzYWJsZWR9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZmllbGRzZXQ+XG4gICAgICAgICk7XG4gICAgICB9KX1cbiAgICA8Lz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmFyaWF0aW9uc0dyb3VwcztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLQSxLQUFLLE1BQU0sT0FBTztBQUM5QixTQUFTQyxvQkFBb0IsUUFBUSxTQUFTO0FBQzlDLFNBQVNDLGNBQWMsRUFBRUMsaUJBQWlCLFFBQVEsV0FBVztBQUM3RCxTQUFTQyxjQUFjLFFBQVEsUUFBUTtBQUN2QyxPQUFPQyxjQUFjLE1BQU0sa0JBQWtCO0FBQzdDLE9BQU9DLGtCQUFrQixNQUFNLHNCQUFzQjtBQUNyRCxPQUFPQyxpQkFBaUIsTUFBTSxxQkFBcUI7QUFDbkQsT0FBT0MsVUFBVSxNQUFNLGNBQWM7QUFDckMsU0FBU0MsYUFBYSxRQUFRLGlCQUFpQjtBQUMvQyxTQUFTQyxvQkFBb0IsUUFBUSw2QkFBNkI7QUFBQyxTQUFBQyxHQUFBLElBQUFDLElBQUE7QUFBQSxTQUFBQyxJQUFBLElBQUFDLEtBQUE7QUFBQSxTQUFBQyxRQUFBLElBQUFDLFNBQUE7QUFPbkUsU0FBU0MsZ0JBQWdCQSxDQUFBQyxJQUFBLEVBQWlEO0VBQUEsSUFBOUNDLFFBQVEsR0FBQUQsSUFBQSxDQUFSQyxRQUFRO0lBQUFDLFNBQUEsR0FBQUYsSUFBQSxDQUFFRyxJQUFJO0lBQUpBLElBQUksR0FBQUQsU0FBQSxjQUFHLGtCQUFrQixHQUFBQSxTQUFBO0VBQzdELElBQUFFLHFCQUFBLEdBT0laLG9CQUFvQixDQUFDLENBQUM7SUFOeEJhLHdCQUF3QixHQUFBRCxxQkFBQSxDQUF4QkMsd0JBQXdCO0lBQ3hCQyxPQUFPLEdBQUFGLHFCQUFBLENBQVBFLE9BQU87SUFDUEMsaUJBQWlCLEdBQUFILHFCQUFBLENBQWpCRyxpQkFBaUI7SUFDakJDLG1CQUFtQixHQUFBSixxQkFBQSxDQUFuQkksbUJBQW1CO0lB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