'use client';

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
import { useState } from 'react';
import { isBoolean, isArray } from 'lodash';
import { IconFile } from './icons';
import { allowedFileTypes } from './utils';
import DropzoneInput from './DropzoneInput';
import InputHiddenStatic from './InputHiddenStatic';
import VariationError from './VariationError';
import VariationLabel from './VariationLabel';
import Collapse from './Collapse';
import { useFieldArray } from 'react-hook-form';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faChevronDown, faChevronUp, faCircleNotch, faDownload, faTimes, faTrashAlt } from '@fortawesome/free-solid-svg-icons';
import { useMerchiFormContext } from './MerchiProductFormProvider';
import { jsx as _jsx } from "react/jsx-runtime";
import { jsxs as _jsxs } from "react/jsx-runtime";
import { Fragment as _Fragment } from "react/jsx-runtime";
var LoadingIcon = function LoadingIcon() {
  return /*#__PURE__*/_jsx(FontAwesomeIcon, {
    icon: faCircleNotch,
    spin: true
  });
};
function FileListItem(_ref) {
  var file = _ref.file,
    disabled = _ref.disabled,
    doDelete = _ref.doDelete,
    loading = _ref.loading;
  var _useMerchiFormContext = useMerchiFormContext(),
    classNameFileListItem = _useMerchiFormContext.classNameFileListItem,
    classNameFileButtonDownload = _useMerchiFormContext.classNameFileButtonDownload,
    classNameFileButtonDelete = _useMerchiFormContext.classNameFileButtonDelete;
  return /*#__PURE__*/_jsx("li", {
    className: classNameFileListItem,
    children: /*#__PURE__*/_jsxs("div", {
      style: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center'
      },
      children: [/*#__PURE__*/_jsx("span", {
        className: "ml-3",
        children: file.name
      }), !disabled && /*#__PURE__*/_jsxs("div", {
        style: {
          marginLeft: 'auto'
        },
        children: [/*#__PURE__*/_jsx("a", {
          className: classNameFileButtonDownload,
          href: file.downloadUrl,
          download: true,
          children: /*#__PURE__*/_jsx(FontAwesomeIcon, {
            icon: faDownload
          })
        }), doDelete && /*#__PURE__*/_jsx("button", {
          className: classNameFileButtonDelete,
          onClick: doDelete,
          disabled: Boolean(loading),
          children: loading ? /*#__PURE__*/_jsx(LoadingIcon, {}) : /*#__PURE__*/_jsx(FontAwesomeIcon, {
            icon: faTrashAlt
          })
        })]
      })]
    })
  });
}
function VariationFilesList(_ref2) {
  var files = _ref2.files;
  var _useMerchiFormContext2 = useMerchiFormContext(),
    classNameFileListItemContainer = _useMerchiFormContext2.classNameFileListItemContainer;
  return /*#__PURE__*/_jsx("ul", {
    className: classNameFileListItemContainer,
    children: files.map(function (f, i) {
      return /*#__PURE__*/_jsx(FileListItem, {
        file: f
      }, "".concat(i, "-publicfile"));
    })
  });
}
function determineBoolean(value) {
  return isBoolean(value) ? value : value === 'true' ? true : false;
}
function VariationFile(_ref3) {
  var deleteVariationFile = _ref3.deleteVariationFile,
    file = _ref3.file,
    index = _ref3.index,
    inputName = _ref3.inputName;
  var _useMerchiFormContext3 = useMerchiFormContext(),
    classNameFilePreviewContainer = _useMerchiFormContext3.classNameFilePreviewContainer,
    classNameFilePreviewIconWrapper = _useMerchiFormContext3.classNameFilePreviewIconWrapper;
  return /*#__PURE__*/_jsxs("div", {
    className: classNameFilePreviewContainer,
    onClick: function onClick() {
      return deleteVariationFile(file);
    },
    children: [/*#__PURE__*/_jsx("div", {
      className: classNameFilePreviewIconWrapper,
      onClick: function onClick() {
        return deleteVariationFile(file);
      },
      children: /*#__PURE__*/_jsx(FontAwesomeIcon, {
        icon: faTimes,
        className: "close-icon"
      })
    }), /*#__PURE__*/_jsx(IconFile, {
      file: file
    }), /*#__PURE__*/_jsx(InputHiddenStatic, {
      name: "".concat(inputName, "[").concat(index, "].id"),
      rules: {
        required: true
      },
      value: file.id
    })]
  });
}
function ButtonUploadedFiles(_ref4) {
  var files = _ref4.files,
    isOpen = _ref4.isOpen,
    onClick = _ref4.onClick;
  var hasFiles = Array.isArray(files) && files.length > 0;
  var text = files.length !== 1 ? "".concat(files.length, " files selected") : '1 file selected';
  var icon = isOpen ? faChevronUp : faChevronDown;
  var _useMerchiFormContext4 = useMerchiFormContext(),
    classNameFileUploadButton = _useMerchiFormContext4.classNameFileUploadButton;
  return /*#__PURE__*/_jsxs("button", {
    className: classNameFileUploadButton,
    disabled: files.length === 0,
    onClick: onClick,
    children: [hasFiles ? text : 'No files selected', ' ', hasFiles && /*#__PURE__*/_jsx(FontAwesomeIcon, {
      icon: icon
    })]
  });
}
function VariationFileInput(_ref5) {
  var disabled = _ref5.disabled,
    name = _ref5.name,
    variation = _ref5.variation;
  var _useMerchiFormContext5 = useMerchiFormContext(),
    classNameFileUploadContainer = _useMerchiFormContext5.classNameFileUploadContainer,
    control = _useMerchiFormContext5.control;
  var inputName = "".concat(name, ".variationFiles");
  var variationField = variation.variationField;
  var allowFileMultiple = variationField.allowFileMultiple,
    placeholder = variationField.placeholder,
    required = variationField.required,
    showFilePreview = variationField.showFilePreview;
  var _useFieldArray = useFieldArray({
      control: control,
      keyName: 'fileId',
      name: inputName,
      rules: {
        required: required
      }
    }),
    append = _useFieldArray.append,
    fields = _useFieldArray.fields,
    remove = _useFieldArray.remove;
  var hasFiles = isArray(fields) && fields.length;
  var _useState = useState(Boolean(hasFiles)),
    _useState2 = _slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  var toggle = function toggle() {
    return setIsOpen(!isOpen);
  };
  var _allowFileMultiple = determineBoolean(allowFileMultiple);
  var _showFilePreview = determineBoolean(showFilePreview);
  function handleUploadSuccess(fs) {
    console.log('trying to append the file,', fs);
    if (_allowFileMultiple) {
      append(fs);
    } else {
      if (hasFiles) remove(0);
      append(fs[0]);
    }
  }
  return /*#__PURE__*/_jsxs("div", {
    className: classNameFileUploadContainer,
    children: [/*#__PURE__*/_jsx(VariationLabel, {
      variationClassName: "merchi-embed-form_input-file",
      name: name,
      variation: variation
    }), /*#__PURE__*/_jsx(DropzoneInput, {
      accept: allowedFileTypes(variationField),
      disabled: disabled,
      multiple: allowFileMultiple,
      onUploadSuccess: handleUploadSuccess,
      placeholder: placeholder
    }), /*#__PURE__*/_jsx(VariationError, {
      name: name
    }), /*#__PURE__*/_jsx("div", {
      className: "uploaded-variation-files",
      children: fields.map(function (file, index) {
        return _showFilePreview ? /*#__PURE__*/_jsx("fieldset", {
          className: "d-inline-block mr-2",
          children: /*#__PURE__*/_jsx(VariationFile, {
            deleteVariationFile: function deleteVariationFile() {
              return remove(index);
            },
            file: file,
            index: index,
            inputName: inputName
          }, "".concat(name, "-file-key-").concat(index))
        }, file.fileId) : /*#__PURE__*/_jsx(InputHiddenStatic, {
          name: "".concat(inputName, "[").concat(index, "].id"),
          rules: {
            required: true
          },
          value: file.id
        }, "".concat(name, "-file-key-").concat(index));
      })
    }), !_showFilePreview && /*#__PURE__*/_jsxs(_Fragment, {
      children: [/*#__PURE__*/_jsx(Collapse, {
        isOpen: Boolean(isOpen),
        children: /*#__PURE__*/_jsx(VariationFilesList, {
          files: fields
        })
      }), /*#__PURE__*/_jsx("div", {
        className: "clearfix mb-3",
        children: /*#__PURE__*/_jsx(ButtonUploadedFiles, {
          files: fields,
          isOpen: isOpen,
          onClick: toggle
        })
      })]
    })]
  });
}
export default VariationFileInput;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2xpY2VkVG9BcnJheSIsImFyciIsImkiLCJfYXJyYXlXaXRoSG9sZXMiLCJfaXRlcmFibGVUb0FycmF5TGltaXQiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVSZXN0IiwiVHlwZUVycm9yIiwibyIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwibiIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiQXJyYXkiLCJmcm9tIiwidGVzdCIsImxlbiIsImxlbmd0aCIsImFycjIiLCJyIiwibCIsInQiLCJTeW1ib2wiLCJpdGVyYXRvciIsImUiLCJ1IiwiYSIsImYiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJ2YWx1ZSIsImlzQXJyYXkiLCJ1c2VTdGF0ZSIsImlzQm9vbGVhbiIsIkljb25GaWxlIiwiYWxsb3dlZEZpbGVUeXBlcyIsIkRyb3B6b25lSW5wdXQiLCJJbnB1dEhpZGRlblN0YXRpYyIsIlZhcmlhdGlvbkVycm9yIiwiVmFyaWF0aW9uTGFiZWwiLCJDb2xsYXBzZSIsInVzZUZpZWxkQXJyYXkiLCJGb250QXdlc29tZUljb24iLCJmYUNoZXZyb25Eb3duIiwiZmFDaGV2cm9uVXAiLCJmYUNpcmNsZU5vdGNoIiwiZmFEb3dubG9hZCIsImZhVGltZXMiLCJmYVRyYXNoQWx0IiwidXNlTWVyY2hpRm9ybUNvbnRleHQiLCJqc3giLCJfanN4IiwianN4cyIsIl9qc3hzIiwiRnJhZ21lbnQiLCJfRnJhZ21lbnQiLCJMb2FkaW5nSWNvbiIsImljb24iLCJzcGluIiwiRmlsZUxpc3RJdGVtIiwiX3JlZiIsImZpbGUiLCJkaXNhYmxlZCIsImRvRGVsZXRlIiwibG9hZGluZyIsIl91c2VNZXJjaGlGb3JtQ29udGV4dCIsImNsYXNzTmFtZUZpbGVMaXN0SXRlbSIsImNsYXNzTmFtZUZpbGVCdXR0b25Eb3dubG9hZCIsImNsYXNzTmFtZUZpbGVCdXR0b25EZWxldGUiLCJjbGFzc05hbWUiLCJjaGlsZHJlbiIsInN0eWxlIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsIm1hcmdpbkxlZnQiLCJocmVmIiwiZG93bmxvYWRVcmwiLCJkb3dubG9hZCIsIm9uQ2xpY2siLCJCb29sZWFuIiwiVmFyaWF0aW9uRmlsZXNMaXN0IiwiX3JlZjIiLCJmaWxlcyIsIl91c2VNZXJjaGlGb3JtQ29udGV4dDIiLCJjbGFzc05hbWVGaWxlTGlzdEl0ZW1Db250YWluZXIiLCJtYXAiLCJjb25jYXQiLCJkZXRlcm1pbmVCb29sZWFuIiwiVmFyaWF0aW9uRmlsZSIsIl9yZWYzIiwiZGVsZXRlVmFyaWF0aW9uRmlsZSIsImluZGV4IiwiaW5wdXROYW1lIiwiX3VzZU1lcmNoaUZvcm1Db250ZXh0MyIsImNsYXNzTmFtZUZpbGVQcmV2aWV3Q29udGFpbmVyIiwiY2xhc3NOYW1lRmlsZVByZXZpZXdJY29uV3JhcHBlciIsInJ1bGVzIiwicmVxdWlyZWQiLCJpZCIsIkJ1dHRvblVwbG9hZGVkRmlsZXMiLCJfcmVmNCIsImlzT3BlbiIsImhhc0ZpbGVzIiwidGV4dCIsIl91c2VNZXJjaGlGb3JtQ29udGV4dDQiLCJjbGFzc05hbWVGaWxlVXBsb2FkQnV0dG9uIiwiVmFyaWF0aW9uRmlsZUlucHV0IiwiX3JlZjUiLCJ2YXJpYXRpb24iLCJfdXNlTWVyY2hpRm9ybUNvbnRleHQ1IiwiY2xhc3NOYW1lRmlsZVVwbG9hZENvbnRhaW5lciIsImNvbnRyb2wiLCJ2YXJpYXRpb25GaWVsZCIsImFsbG93RmlsZU11bHRpcGxlIiwicGxhY2Vob2xkZXIiLCJzaG93RmlsZVByZXZpZXciLCJfdXNlRmllbGRBcnJheSIsImtleU5hbWUiLCJhcHBlbmQiLCJmaWVsZHMiLCJyZW1vdmUiLCJfdXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwic2V0SXNPcGVuIiwidG9nZ2xlIiwiX2FsbG93RmlsZU11bHRpcGxlIiwiX3Nob3dGaWxlUHJldmlldyIsImhhbmRsZVVwbG9hZFN1Y2Nlc3MiLCJmcyIsImNvbnNvbGUiLCJsb2ciLCJ2YXJpYXRpb25DbGFzc05hbWUiLCJhY2NlcHQiLCJtdWx0aXBsZSIsIm9uVXBsb2FkU3VjY2VzcyIsImZpbGVJZCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL1ZhcmlhdGlvbkZpbGVJbnB1dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jvb2xlYW4sIGlzQXJyYXkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgSWNvbkZpbGUgfSBmcm9tICcuL2ljb25zJztcbmltcG9ydCB7IGFsbG93ZWRGaWxlVHlwZXMgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBEcm9wem9uZUlucHV0IGZyb20gJy4vRHJvcHpvbmVJbnB1dCc7XG5pbXBvcnQgSW5wdXRIaWRkZW5TdGF0aWMgZnJvbSAnLi9JbnB1dEhpZGRlblN0YXRpYyc7XG5pbXBvcnQgVmFyaWF0aW9uRXJyb3IgZnJvbSAnLi9WYXJpYXRpb25FcnJvcic7XG5pbXBvcnQgVmFyaWF0aW9uTGFiZWwgZnJvbSAnLi9WYXJpYXRpb25MYWJlbCc7XG5pbXBvcnQgQ29sbGFwc2UgZnJvbSAnLi9Db2xsYXBzZSc7XG5pbXBvcnQgeyB1c2VGaWVsZEFycmF5IH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcbmltcG9ydCB7IEZvbnRBd2Vzb21lSWNvbiB9IGZyb20gJ0Bmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZSc7XG5pbXBvcnQge1xuICBmYUNoZXZyb25Eb3duLFxuICBmYUNoZXZyb25VcCxcbiAgZmFDaXJjbGVOb3RjaCxcbiAgZmFEb3dubG9hZCxcbiAgZmFUaW1lcyxcbiAgZmFUcmFzaEFsdCxcbn0gZnJvbSAnQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zJztcbmltcG9ydCB7IHVzZU1lcmNoaUZvcm1Db250ZXh0IH0gZnJvbSAnLi9NZXJjaGlQcm9kdWN0Rm9ybVByb3ZpZGVyJztcblxuY29uc3QgTG9hZGluZ0ljb24gPSAoKSA9PiA8Rm9udEF3ZXNvbWVJY29uIGljb249e2ZhQ2lyY2xlTm90Y2h9IHNwaW4gLz47XG5cbmludGVyZmFjZSBQcm9wc0ZpbGVMaXN0SXRlbSB7XG4gIGZpbGU6IGFueTtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBkb0RlbGV0ZT86ICgpID0+IHZvaWQ7XG4gIGxvYWRpbmc/OiBib29sZWFuO1xufVxuXG5mdW5jdGlvbiBGaWxlTGlzdEl0ZW0oe1xuICBmaWxlLFxuICBkaXNhYmxlZCxcbiAgZG9EZWxldGUsXG4gIGxvYWRpbmcsXG59OiBQcm9wc0ZpbGVMaXN0SXRlbSkge1xuICBjb25zdCB7XG4gICAgY2xhc3NOYW1lRmlsZUxpc3RJdGVtLFxuICAgIGNsYXNzTmFtZUZpbGVCdXR0b25Eb3dubG9hZCxcbiAgICBjbGFzc05hbWVGaWxlQnV0dG9uRGVsZXRlLFxuICB9ID0gdXNlTWVyY2hpRm9ybUNvbnRleHQoKTtcbiAgcmV0dXJuIChcbiAgICA8bGkgY2xhc3NOYW1lPXtjbGFzc05hbWVGaWxlTGlzdEl0ZW19PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbWwtMyc+e2ZpbGUubmFtZX08L3NwYW4+XG4gICAgICAgIHshZGlzYWJsZWQgJiYgKFxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luTGVmdDogJ2F1dG8nIH19PlxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVGaWxlQnV0dG9uRG93bmxvYWR9XG4gICAgICAgICAgICAgIGhyZWY9e2ZpbGUuZG93bmxvYWRVcmx9XG4gICAgICAgICAgICAgIGRvd25sb2FkXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxGb250QXdlc29tZUljb24gaWNvbj17ZmFEb3dubG9hZH0gLz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIHtkb0RlbGV0ZSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZUZpbGVCdXR0b25EZWxldGV9XG4gICAgICAgICAgICAgICAgb25DbGljaz17ZG9EZWxldGV9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e0Jvb2xlYW4obG9hZGluZyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxMb2FkaW5nSWNvbiAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uIGljb249e2ZhVHJhc2hBbHR9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9saT5cbiAgKTtcbn1cblxuaW50ZXJmYWNlIFZhcmlhdGlvbkZpbGVzTGlzdFByb3BzIHtcbiAgZmlsZXM6IEFycmF5PGFueT47XG59XG5cbmZ1bmN0aW9uIFZhcmlhdGlvbkZpbGVzTGlzdCh7IGZpbGVzIH06IFZhcmlhdGlvbkZpbGVzTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lRmlsZUxpc3RJdGVtQ29udGFpbmVyfSA9IHVzZU1lcmNoaUZvcm1Db250ZXh0KCk7XG4gIHJldHVybiAoXG4gICAgPHVsIGNsYXNzTmFtZT17Y2xhc3NOYW1lRmlsZUxpc3RJdGVtQ29udGFpbmVyfT5cbiAgICAgIHtmaWxlcy5tYXAoKGY6IGFueSwgaTogbnVtYmVyKSA9PiAoXG4gICAgICAgIDxGaWxlTGlzdEl0ZW0ga2V5PXtgJHtpfS1wdWJsaWNmaWxlYH0gZmlsZT17Zn0gLz5cbiAgICAgICkpfVxuICAgIDwvdWw+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZUJvb2xlYW4odmFsdWU6IGFueSkge1xuICByZXR1cm4gaXNCb29sZWFuKHZhbHVlKSA/IHZhbHVlIDogdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcbn1cblxuaW50ZXJmYWNlIFZhcmlhdGlvbkZpbGVQcm9wcyB7XG4gIGRlbGV0ZVZhcmlhdGlvbkZpbGU6IChmaWxlOiBhbnkpID0+IHZvaWQ7XG4gIGZpbGU6IGFueTtcbiAgaW5kZXg6IG51bWJlcjtcbiAgaW5wdXROYW1lOiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIFZhcmlhdGlvbkZpbGUoe1xuICBkZWxldGVWYXJpYXRpb25GaWxlLFxuICBmaWxlLFxuICBpbmRleCxcbiAgaW5wdXROYW1lLFxufTogVmFyaWF0aW9uRmlsZVByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBjbGFzc05hbWVGaWxlUHJldmlld0NvbnRhaW5lcixcbiAgICBjbGFzc05hbWVGaWxlUHJldmlld0ljb25XcmFwcGVyLFxuICB9ID0gdXNlTWVyY2hpRm9ybUNvbnRleHQoKTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZUZpbGVQcmV2aWV3Q29udGFpbmVyfVxuICAgICAgb25DbGljaz17KCkgPT4gZGVsZXRlVmFyaWF0aW9uRmlsZShmaWxlKX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lRmlsZVByZXZpZXdJY29uV3JhcHBlcn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZGVsZXRlVmFyaWF0aW9uRmlsZShmaWxlKX1cbiAgICAgID5cbiAgICAgICAgPEZvbnRBd2Vzb21lSWNvbiBpY29uPXtmYVRpbWVzfSBjbGFzc05hbWU9J2Nsb3NlLWljb24nIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxJY29uRmlsZSBmaWxlPXtmaWxlfSAvPlxuICAgICAgPElucHV0SGlkZGVuU3RhdGljXG4gICAgICAgIG5hbWU9e2Ake2lucHV0TmFtZX1bJHtpbmRleH1dLmlkYH1cbiAgICAgICAgcnVsZXM9e3sgcmVxdWlyZWQ6IHRydWUgfX1cbiAgICAgICAgdmFsdWU9e2ZpbGUuaWR9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5pbnRlcmZhY2UgQnV0dG9uVXBsb2FkZWRGaWxlc1Byb3BzIHtcbiAgZmlsZXM6IEFycmF5PGFueT47XG4gIGlzT3Blbj86IGJvb2xlYW47XG4gIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XG59XG5cbmZ1bmN0aW9uIEJ1dHRvblVwbG9hZGVkRmlsZXMoe1xuICBmaWxlcyxcbiAgaXNPcGVuLFxuICBvbkNsaWNrLFxufTogQnV0dG9uVXBsb2FkZWRGaWxlc1Byb3BzKSB7XG4gIGNvbnN0IGhhc0ZpbGVzID0gQXJyYXkuaXNBcnJheShmaWxlcykgJiYgZmlsZXMubGVuZ3RoID4gMDtcbiAgY29uc3QgdGV4dCA9XG4gICAgZmlsZXMubGVuZ3RoICE9PSAxID8gYCR7ZmlsZXMubGVuZ3RofSBmaWxlcyBzZWxlY3RlZGAgOiAnMSBmaWxlIHNlbGVjdGVkJztcbiAgY29uc3QgaWNvbiA9IGlzT3BlbiA/IGZhQ2hldnJvblVwIDogZmFDaGV2cm9uRG93bjtcbiAgY29uc3QgeyBjbGFzc05hbWVGaWxlVXBsb2FkQnV0dG9uIH0gPSB1c2VNZXJjaGlGb3JtQ29udGV4dCgpO1xuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lRmlsZVVwbG9hZEJ1dHRvbn1cbiAgICAgIGRpc2FibGVkPXtmaWxlcy5sZW5ndGggPT09IDB9XG4gICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgID5cbiAgICAgIHtoYXNGaWxlcyA/IHRleHQgOiAnTm8gZmlsZXMgc2VsZWN0ZWQnfXsnICd9XG4gICAgICB7aGFzRmlsZXMgJiYgPEZvbnRBd2Vzb21lSWNvbiBpY29uPXtpY29ufSAvPn1cbiAgICA8L2J1dHRvbj5cbiAgKTtcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhcmlhdGlvbjogYW55O1xufVxuXG5mdW5jdGlvbiBWYXJpYXRpb25GaWxlSW5wdXQoeyBkaXNhYmxlZCwgbmFtZSwgdmFyaWF0aW9uIH06IFByb3BzKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lRmlsZVVwbG9hZENvbnRhaW5lciwgY29udHJvbCB9ID0gdXNlTWVyY2hpRm9ybUNvbnRleHQoKTtcbiAgY29uc3QgaW5wdXROYW1lID0gYCR7bmFtZX0udmFyaWF0aW9uRmlsZXNgO1xuICBjb25zdCB7IHZhcmlhdGlvbkZpZWxkIH0gPSB2YXJpYXRpb247XG4gIGNvbnN0IHsgYWxsb3dGaWxlTXVsdGlwbGUsIHBsYWNlaG9sZGVyLCByZXF1aXJlZCwgc2hvd0ZpbGVQcmV2aWV3IH0gPVxuICAgIHZhcmlhdGlvbkZpZWxkO1xuICBjb25zdCB7IGFwcGVuZCwgZmllbGRzLCByZW1vdmUgfSA9IHVzZUZpZWxkQXJyYXkoe1xuICAgIGNvbnRyb2wsXG4gICAga2V5TmFtZTogJ2ZpbGVJZCcsXG4gICAgbmFtZTogaW5wdXROYW1lLFxuICAgIHJ1bGVzOiB7IHJlcXVpcmVkIH0sXG4gIH0pO1xuICBjb25zdCBoYXNGaWxlcyA9IGlzQXJyYXkoZmllbGRzKSAmJiBmaWVsZHMubGVuZ3RoO1xuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoQm9vbGVhbihoYXNGaWxlcykpO1xuICBjb25zdCB0b2dnbGUgPSAoKSA9PiBzZXRJc09wZW4oIWlzT3Blbik7XG4gIGNvbnN0IF9hbGxvd0ZpbGVNdWx0aXBsZSA9IGRldGVybWluZUJvb2xlYW4oYWxsb3dGaWxlTXVsdGlwbGUpO1xuICBjb25zdCBfc2hvd0ZpbGVQcmV2aWV3ID0gZGV0ZXJtaW5lQm9vbGVhbihzaG93RmlsZVByZXZpZXcpO1xuICBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKGZzOiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZygndHJ5aW5nIHRvIGFwcGVuZCB0aGUgZmlsZSwnLCBmcyk7XG4gICAgaWYgKF9hbGxvd0ZpbGVNdWx0aXBsZSkge1xuICAgICAgYXBwZW5kKGZzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGhhc0ZpbGVzKSByZW1vdmUoMCk7XG4gICAgICBhcHBlbmQoZnNbMF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVGaWxlVXBsb2FkQ29udGFpbmVyfT5cbiAgICAgIDxWYXJpYXRpb25MYWJlbFxuICAgICAgICB2YXJpYXRpb25DbGFzc05hbWU9J21lcmNoaS1lbWJlZC1mb3JtX2lucHV0LWZpbGUnXG4gICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgIHZhcmlhdGlvbj17dmFyaWF0aW9ufVxuICAgICAgLz5cbiAgICAgIDxEcm9wem9uZUlucHV0XG4gICAgICAgIGFjY2VwdD17YWxsb3dlZEZpbGVUeXBlcyh2YXJpYXRpb25GaWVsZCl9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgbXVsdGlwbGU9e2FsbG93RmlsZU11bHRpcGxlfVxuICAgICAgICBvblVwbG9hZFN1Y2Nlc3M9e2hhbmRsZVVwbG9hZFN1Y2Nlc3N9XG4gICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cbiAgICAgIC8+XG4gICAgICA8VmFyaWF0aW9uRXJyb3IgbmFtZT17bmFtZX0gLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd1cGxvYWRlZC12YXJpYXRpb24tZmlsZXMnPlxuICAgICAgICB7ZmllbGRzLm1hcCgoZmlsZTogYW55LCBpbmRleDogbnVtYmVyKSA9PlxuICAgICAgICAgIF9zaG93RmlsZVByZXZpZXcgPyAoXG4gICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3NOYW1lPSdkLWlubGluZS1ibG9jayBtci0yJyBrZXk9e2ZpbGUuZmlsZUlkfT5cbiAgICAgICAgICAgICAgPFZhcmlhdGlvbkZpbGVcbiAgICAgICAgICAgICAgICBrZXk9e2Ake25hbWV9LWZpbGUta2V5LSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICBkZWxldGVWYXJpYXRpb25GaWxlPXsoKSA9PiByZW1vdmUoaW5kZXgpfVxuICAgICAgICAgICAgICAgIGZpbGU9e2ZpbGV9XG4gICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgICAgIGlucHV0TmFtZT17aW5wdXROYW1lfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9maWVsZHNldD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPElucHV0SGlkZGVuU3RhdGljXG4gICAgICAgICAgICAgIGtleT17YCR7bmFtZX0tZmlsZS1rZXktJHtpbmRleH1gfVxuICAgICAgICAgICAgICBuYW1lPXtgJHtpbnB1dE5hbWV9WyR7aW5kZXh9XS5pZGB9XG4gICAgICAgICAgICAgIHJ1bGVzPXt7IHJlcXVpcmVkOiB0cnVlIH19XG4gICAgICAgICAgICAgIHZhbHVlPXtmaWxlLmlkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIHshX3Nob3dGaWxlUHJldmlldyAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPENvbGxhcHNlIGlzT3Blbj17Qm9vbGVhbihpc09wZW4pfT5cbiAgICAgICAgICAgIDxWYXJpYXRpb25GaWxlc0xpc3QgZmlsZXM9e2ZpZWxkc30gLz5cbiAgICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjbGVhcmZpeCBtYi0zJz5cbiAgICAgICAgICAgIDxCdXR0b25VcGxvYWRlZEZpbGVzXG4gICAgICAgICAgICAgIGZpbGVzPXtmaWVsZHN9XG4gICAgICAgICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhcmlhdGlvbkZpbGVJbnB1dDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxTQUFBQSxlQUFBQyxHQUFBLEVBQUFDLENBQUEsV0FBQUMsZUFBQSxDQUFBRixHQUFBLEtBQUFHLHFCQUFBLENBQUFILEdBQUEsRUFBQUMsQ0FBQSxLQUFBRywyQkFBQSxDQUFBSixHQUFBLEVBQUFDLENBQUEsS0FBQUksZ0JBQUE7QUFBQSxTQUFBQSxpQkFBQSxjQUFBQyxTQUFBO0FBQUEsU0FBQUYsNEJBQUFHLENBQUEsRUFBQUMsTUFBQSxTQUFBRCxDQUFBLHFCQUFBQSxDQUFBLHNCQUFBRSxpQkFBQSxDQUFBRixDQUFBLEVBQUFDLE1BQUEsT0FBQUUsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLFNBQUEsQ0FBQUMsUUFBQSxDQUFBQyxJQUFBLENBQUFQLENBQUEsRUFBQVEsS0FBQSxhQUFBTCxDQUFBLGlCQUFBSCxDQUFBLENBQUFTLFdBQUEsRUFBQU4sQ0FBQSxHQUFBSCxDQUFBLENBQUFTLFdBQUEsQ0FBQUMsSUFBQSxNQUFBUCxDQUFBLGNBQUFBLENBQUEsbUJBQUFRLEtBQUEsQ0FBQUMsSUFBQSxDQUFBWixDQUFBLE9BQUFHLENBQUEsK0RBQUFVLElBQUEsQ0FBQVYsQ0FBQSxVQUFBRCxpQkFBQSxDQUFBRixDQUFBLEVBQUFDLE1BQUE7QUFBQSxTQUFBQyxrQkFBQVQsR0FBQSxFQUFBcUIsR0FBQSxRQUFBQSxHQUFBLFlBQUFBLEdBQUEsR0FBQXJCLEdBQUEsQ0FBQXNCLE1BQUEsRUFBQUQsR0FBQSxHQUFBckIsR0FBQSxDQUFBc0IsTUFBQSxXQUFBckIsQ0FBQSxNQUFBc0IsSUFBQSxPQUFBTCxLQUFBLENBQUFHLEdBQUEsR0FBQXBCLENBQUEsR0FBQW9CLEdBQUEsRUFBQXBCLENBQUEsSUFBQXNCLElBQUEsQ0FBQXRCLENBQUEsSUFBQUQsR0FBQSxDQUFBQyxDQUFBLFVB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